<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>three.js canvas - lines - random</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				background-color: #000000;
				margin: 0px;
				overflow: hidden;
				font-family:Monospace;
				font-size:13px;
				text-align:center;
				font-weight: bold;
				text-align:center;
			}

			a {
				color:#0078ff;
			}

			#info {
				color: #fff;
				position: absolute;
				top: 0px; width: 100%;
				padding: 5px;
				z-index: 100;
			}

		</style>
	</head>
	<body>

		<script type="text/javascript" src="Three.js"></script>

		<script type="text/javascript" src="js/RequestAnimationFrame.js"></script>
		<script type="text/javascript" src="js/Stats.js"></script>
    
    <script type="text/javascript" src="../../libs/jquery/jquery.js"></script>
        

		<script type="text/javascript">

			var mouseX = 0, mouseY = 0,

			windowHalfX = window.innerWidth / 2,
			windowHalfY = window.innerHeight / 2,

			SEPARATION = 200,
			AMOUNTX = 10,
			AMOUNTY = 10,

			camera, scene, renderer, neurontree;
            
			var camera, scene, renderer, particles, geometry, materials = [], parameters, i, h, color;
			var mouseX = 0, mouseY = 0;

			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;
            
			var SCREEN_WIDTH = window.innerWidth,
				SCREEN_HEIGHT = window.innerHeight;

            jQuery.ajax({
              url: "../../model/export.skeleton.json.php",
              type: "GET",
              data: {
                pid: 1,
                tnid: 27
              },
              dataType: "json",
              success: function (text) {
                console.log(text);
                neurontree = text;
                console.log("neurontree", neurontree);
                init();
                animate();
              }
            });
    


			function init() {

				container = document.createElement( 'div' );
				document.body.appendChild( container );

				camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 3000 );
				camera.position.z = 50;

				scene = new THREE.Scene();
				//scene.fog = new THREE.FogExp2( 0x000000, 0.0007 );

                geometry = new THREE.CubeGeometry( 200, 200, 200 );
                material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );

                mesh = new THREE.Mesh( geometry, material );
                scene.add( mesh );

				geometry = new THREE.Geometry();

				for( i = 0; i < neurontree.length; i ++ ) {
                    
                    console.log(x,y,z);
					var x = parseFloat(neurontree[i].x);
					var y = parseFloat(neurontree[i].y);
					var z = parseFloat(neurontree[i].z);
                    vector = new THREE.Vector3( x, y, z );
                    vector.addScalar( -2000 );
                    vector.normalize();
                    vector.multiplyScalar(100);
                    console.log(vector);

                    //vector = new THREE.Vector3( x, y, Math.random() * 2000 - 1000  );
                    //vector.normalize();
					//particle.position.normalize();
					//particle.position.multiplyScalar( 100 );
                    
                    // console.log(Math.random() * 2000 - 1000, Math.random() * 2000 - 1000, Math.random() * 2000 - 1000 );
					// vector = new THREE.Vector3( Math.random() * 2000 - 1000, Math.random() * 2000 - 1000, Math.random() * 2000 - 1000 );
					geometry.vertices.push( new THREE.Vertex( vector ) );                    
                }
                
/*
				for ( i = 0; i < 50; i ++ ) {

					vector = new THREE.Vector3( Math.random() * 2000 - 1000, Math.random() * 2000 - 1000, Math.random() * 2000 - 1000 );
                    console.log(vector);
					geometry.vertices.push( new THREE.Vertex( vector ) );
				}*/
                

                // simple particle system
                var material = new THREE.ParticleBasicMaterial( { size: 10 } );
                material.color.setRGB( 1.0, 0.0, 0.0 );
                particles = new THREE.ParticleSystem( geometry, material );
                scene.add( particles );
                

				renderer = new THREE.WebGLRenderer();
				renderer.setSize( window.innerWidth, window.innerHeight );
				container.appendChild( renderer.domElement );

				stats = new Stats();
				stats.domElement.style.position = 'absolute';
				stats.domElement.style.top = '0px';
				container.appendChild( stats.domElement );

				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				document.addEventListener( 'touchstart', onDocumentTouchStart, false );
				document.addEventListener( 'touchmove', onDocumentTouchMove, false );

			}


			function onDocumentMouseMove( event ) {

				mouseX = event.clientX - windowHalfX;
				mouseY = event.clientY - windowHalfY;

			}

			function onDocumentTouchStart( event ) {

				if ( event.touches.length == 1 ) {

					event.preventDefault();

					mouseX = event.touches[ 0 ].pageX - windowHalfX;
					mouseY = event.touches[ 0 ].pageY - windowHalfY;

				}
			}

			function onDocumentTouchMove( event ) {

				if ( event.touches.length == 1 ) {

					event.preventDefault();

					mouseX = event.touches[ 0 ].pageX - windowHalfX;
					mouseY = event.touches[ 0 ].pageY - windowHalfY;

				}

			}

			//

			function animate() {
				requestAnimationFrame( animate );
				render();
			}

			function render() {
				
                camera.position.x += ( mouseX - camera.position.x ) * 0.05;
				camera.position.y += ( - mouseY - camera.position.y ) * 0.05;

				camera.lookAt( scene.position );
                

				renderer.render( scene, camera );

			}

		</script>
	</body>
</html>
